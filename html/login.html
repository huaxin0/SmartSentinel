<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Smart Sentinel - 系统登录</title>
    <style>
        body {
            background-color: #0d1117; /* GitHub Dark 背景色 */
            color: #c9d1d9;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .login-box {
            background-color: #161b22;
            padding: 40px;
            border-radius: 8px;
            border: 1px solid #30363d;
            width: 300px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        h2 { text-align: center; margin-bottom: 20px; color: #58a6ff; }
        input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background-color: #0d1117;
            border: 1px solid #30363d;
            color: #fff;
            border-radius: 4px;
            box-sizing: border-box; /* 关键：防止输入框撑破容器 */
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #238636;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 20px;
        }
        button:hover { background-color: #2ea043; }
        .status { margin-top: 15px; text-align: center; font-size: 14px; }
        .success { color: #3fb950; }
        .error { color: #f85149; }
    </style>
</head>
<body>

<div class="login-box">
    <h2>Smart Sentinel</h2>
    <input type="text" id="username" placeholder="用户名" value="">
    <input type="password" id="password" placeholder="密码" value="">
    <button onclick="doLogin()">登 录</button>
    <div id="status" class="status"></div>
</div>

<script>
    async function doLogin() {
        // 1. 获取输入框的值
        const usernameStr = document.getElementById('username').value;
        const passwordStr = document.getElementById('password').value;
        const statusDiv = document.getElementById('status');

        statusDiv.innerHTML = "正在连接服务器...";
        statusDiv.className = "status";

        try {
            // 2. 发送请求给你的 C++ 后端
            // 注意：这里端口要跟你后端跑的一致 (8083)
            const response = await fetch('http://10.193.58.32:8083/api/user/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    username: usernameStr,
                    password: passwordStr
                })
            });

            // 3. 解析结果
            const result = await response.json();
            
            if (result.code === 0) {
                // 登录成功
                statusDiv.innerText = "登录成功！欢迎 " + result.data.username;
                statusDiv.className = "status success";
                // 模拟跳转
                setTimeout(() => alert("进入监控主系统..."), 500);
            } else {
                // 业务失败 (账号密码错误)
                statusDiv.innerText = "失败: " + result.msg;
                statusDiv.className = "status error";
            }

        } catch (error) {
            // 网络错误 (比如后端没启动，或者跨域没配好)
            console.error(error);
            statusDiv.innerText = "请求失败，请检查控制台 (F12)";
            statusDiv.className = "status error";
        }
    }
</script>

</body>
</html>